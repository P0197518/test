<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>物料出库登记</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="../boot.js" type="text/javascript"></script>
</head>

<body class="no-skin">

    <div class="edit-page-content">
        <div id="form1" class="form-horizontal">
            <input name="type" id="type" class="mini-hidden" value="" />
            <input class="mini-hidden" name="mode" id="mode" />
            <div>
                <div class="tab-content profile-edit-tab-content">
                    <div id="edit-basic" class="tab-pane in active">
                        <h4 class="header blue bolder smaller">出库基本信息</h4>
                        <div class="vspace-12-sm"></div>
                        <div class="space-4"></div>
                        <div class="form-group">
                            <label for="name" class="control-label col-sm-0">出库类型:</label>
                            <div class="col-sm-4">
                                <div id="outType" onvaluechanged="outTypeChange" class="mini-radiobuttonlist" value="0001" repeatLayout="table" repeatDirection="vertical" textField="text" valueField="value" value="cn" data='[{value:"0001",text:"生产领料"},{value:"0002",text:"个别出库"},{value:"0003",text:"不良出库"}]'>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="prodArea">
                            <label for="name" class="control-label col-sm-0">指令书号:</label>
                            <div class="col-sm-3">
                                <input id="prodNo" class="mini-textbox" textField="text" required="ture" valueField="value" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="name" class="control-label col-sm-0">出库人:</label>
                            <div class="col-sm-3">
                                <input id="invoiceNo" enabled="false" class="mini-textbox" textField="text" required="ture" valueField="value" />
                            </div>
                            <label for="name" class="control-label col-sm-0">出库日期:</label>
                            <div class="col-sm-3">
                                <input id="billNumber" class="mini-datepicker" textField="text" required="ture" valueField="value" />
                            </div>
                        </div>
                        <h4 class="header blue bolder smaller">待出库物料列表</h4>
                        <div class="vspace-12-sm"></div>
                        <div class="space-4"></div>
                        <div class="mini-toolbar">
                            <table style="width:100%;">
                                <tr>
                                    <td style="width:100%;">
                                        <a class="mini-button" iconCls="icon-add" onclick="addRow()" plain="true">新增</a>
                                        <span class="separator"></span>
                                        <a class="mini-button" iconCls="icon-remove" onclick="removeRow()" plain="true">删除</a>
                                    </td>
                                </tr>
                            </table>
                            <div class="">
                            </div>
                            <div id="grid1" class="mini-datagrid" allowCellEdit="true" idField="id" skipReadOnlyCell="true" allowResize="false" allowCellSelect="true" multiSelect="false" editNextOnEnterKey="true" sortOrder="asc" showPager="false">
                                <div property="columns">
                                    <div type="checkcolumn"></div>
                                    <div field="prodNo" width="120" headerAlign="center" allowSort="false" align="center">指令书号</div>
                                    <div field="drawingNo" width="80" headerAlign="center" allowSort="false" align="center">
                                        图纸编号 &nbsp;<i class="ace-icon fa fa-pencil-square-o"></i>
                                        <input property="editor" class="mini-textbox" style="width:100%;" minWidth="100%" />
                                    </div>
                                    <div field="materialName" width="120" headerAlign="center" allowSort="false" align="center">品名</div>
                                    <div field="texture" width="80" headerAlign="center" allowSort="false" align="center">材质</div>
                                    <div field="purchaseNo" width="80" headerAlign="center" allowSort="false" align="center">采购单号</div>
                                    <div field="inDay" width="80" headerAlign="center" allowSort="false" align="center">入库时间</div>
                                    <div field="requireCount" width="80" headerAlign="center" sortField="money" allowSort="false" align="right">需要数量
                                    </div>
                                    <div field="outCount" width="80" headerAlign="center" sortField="money" allowSort="false" align="right">已领数量
                                    </div>
                                    <div field="nowCount" width="80" headerAlign="center" sortField="money" allowSort="false" align="right">本次出库数量<i class="ace-icon fa fa-pencil-square-o"></i>
                                        <input property="editor" class="mini-textbox" style="width:100%;" />
                                    </div>
                                    <div field="remark" width="160" headerAlign="center" sortField="money" allowSort="false" align="left">备注<i class="ace-icon fa fa-pencil-square-o"></i>
                                        <input property="editor" class="mini-textbox" style="width:100%;" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align:center;padding:10px;">
                <a class="mini-button btn btn-info btn-round" onclick="saveDraft()" type="button">
                    <i class="ace-icon fa fa-floppy-o bigger-110"></i> 保存出库
                </a> &nbsp; &nbsp;
            </div>
        </div>
    </div>


    <!-- /.page-content -->

    <script type="text/javascript">
        var form = new mini.Form("#form1");
        mini.parse();
        var grid = mini.get("grid1");
        mini.parse();

        initGridData();

        function initGridData() {
            var gridData = new Array();
            for (var i = 0; i < 10; i++) {
                gridData.push({

                    prodNo: "SY-J119001",
                    orderNo: "QH-J19001",
                    prodNo: "SY-J19001",
                    drawingNo: "E-3295",
                    purchaseNo: "QH-J20001",
                    inDay: "2020/02/02",
                    materialName: "固定刃 560-191.03-38   SKC24",
                    texture: "TE60",
                    requireCount: 300,
                    outCount: 100,
                    nowCount: 200,

                    remark: ""

                });
            }
            grid.setData(gridData);
        }

        function outTypeChange() {
            if (mini.get("outType").getValue() == '0001') {

                initGridData();
                $("#prodArea").show();
                grid.showColumn(1);
                grid.showColumn(7);
                grid.showColumn(8);
            } else {
                grid.clearRows();
                $("#prodArea").hide();
                grid.hideColumn(1);
                grid.hideColumn(7);
                grid.hideColumn(8);
            }
        }
        // 保存操作
        function onOk() {

        }

        function oksave() {

        }

        //初始化时focus
        function loadfocus() {
            mini.get("supplierNo").focus();
        }

        function addRow() {
            var newRow = {
                name: "New Row"
            };
            grid.addRow(newRow, grid.getData().length);

            grid.beginEditCell(newRow, "LoginName");
        }

        function removeRow() {
            var rows = grid.getSelecteds();
            if (rows.length > 0) {

                grid.removeRows(rows, true);
            }
        }
    </script>
</body>

</html>
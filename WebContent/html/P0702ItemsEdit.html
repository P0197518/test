<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>物料添加</title>
    <script src="../boot.js" type="text/javascript"></script>
</head>

<body class="no-skin">
    <div class="edit-page-content">
        <div id="form1" class="form-horizontal">
            <input name="type" id="type" class="mini-hidden" value="" />
            <input class="mini-hidden" name="mode" id="mode" />
            <div>
                <div class="tab-content profile-edit-tab-content">
                    <div id="edit-basic" class="tab-pane in active">
                        <h4 class="header blue bolder smaller">物料基本信息</h4>
                        <div>

                            <div class="form-group">
                                <label for="name" class="control-label col-sm-1">物料种类:</label>
                                <div class="col-sm-3">
                                    <input id="materialType" onvaluechanged="materialTypeChange" name="materialType" class="mini-combobox" textField="distingname" valueField="distingid" allowInput="false" required="ture" data='[{distingid:"0001",distingname:"原材料"},{distingid:"0002",distingname:"完成品"},{distingid:"0003",distingname:"副资材"}]'
                                    />
                                </div>
                            </div>


                            <div class="form-group">
                                <label for="name" class="control-label col-sm-1">物料名称:</label>
                                <div class="col-sm-3">
                                    <input id="billNumber" class="mini-textbox" textField="text" required="ture" valueField="value" />
                                </div>
                                <label for="name" class="control-label col-sm-1">图纸编号:</label>
                                <div class="col-sm-3">
                                    <input id="invoiceNo" class="mini-textbox" textField="text" required="ture" valueField="value" />
                                </div>


                            </div>
                            <div class="form-group">
                                <label for="name" class="control-label col-sm-1">物料大分类:</label>
                                <div class="col-sm-3">
                                    <input id="customer" name="address" class="mini-combobox" textField="distingname" valueField="distingid" allowInput="false" required="ture" data='[{distingid:"1",distingname:"钢饼"},{distingid:"2",distingname:"合金"}]' />
                                </div>
                                <label for="name" class="control-label col-sm-1">物料小分类:</label>
                                <div class="col-sm-3">
                                    <input id="customer" name="address" class="mini-combobox" textField="distingname" valueField="distingid" allowInput="false" required="ture" data='[{distingid:"1",distingname:"钢饼"},{distingid:"2",distingname:"合金"}]' />
                                </div>
                            </div>
                            <div class="form-group productArea">
                                <label for="name" class="control-label col-sm-1">产品性质:</label>
                                <div class="col-sm-3">
                                    <input id="customer" name="address" class="mini-combobox" textField="distingname" valueField="distingid" allowInput="false" data='[{distingid:"1",distingname:"受注品"},{distingid:"2",distingname:"计划品"}]' />
                                </div>


                            </div>

                            <div class="form-group materialArea">
                                <label for="name" class="control-label col-sm-1">
                                    <nobr>
                                        是否价格浮动:
                                </nobr></label>
                                <div class="col-sm-3 mini-radiobuttonlist" repeatItems="1" required="true" repeatDirection="vertical" repeatLayout="table" textField="name" vallueField="value" data="[{name:'是',value:1},{name:'否',value:2}]">
                                </div>
                            </div>
                            <div class="form-group productArea">

                                <label for="name" class="control-label col-sm-1">规格:</label>
                                <div class="col-sm-3">
                                    <input id="BLNo" class="mini-textbox" textField="text" valueField="value" />
                                </div>
                                <label for="name" class="control-label col-sm-1">单重:</label>
                                <div class="col-sm-3">
                                    <input id="BLNo" class="mini-textbox" textField="text" valueField="value" />KG
                                </div>
                            </div>
                            <div class="form-group productArea">
                                <label for="name" class="control-label col-sm-1">包装规格:</label>
                                <div class="col-sm-3">
                                    <input id="BLNo" class="mini-textbox" textField="text" valueField="value" />个/箱
                                </div>
                            </div>
                            <div class="form-group productArea">

                                <label for="name" class="control-label col-sm-1">默认客户:</label>
                                <div class="col-sm-3">
                                    <input id="BLNo" enabled="false" class="mini-textbox" textField="text" valueField="value" />
                                </div>
                                <label for="name" class="control-label col-sm-1">默认价格:</label>
                                <div class="col-sm-3">
                                    <input id="BLNo" enabled="false" class="mini-textbox" textField="text" valueField="value" />RMB
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="name" class="control-label col-sm-1">备注:</label>
                                <div class="col-sm-3">
                                    <input id="BLNo" class="mini-textbox" style="width:410px;" textField="text" valueField="value" />
                                </div>·
                            </div>
                        </div>
                    </div>

                </div>
                <div class="textureArea">
                    <h4 class="header blue bolder smaller">物料材质信息</h4>
                    <div class="vspace-12-sm"></div>
                    <div class="space-4"></div>
                    <div class="mini-toolbar">
                        <table style="width:100%;">
                            <tr>
                                <td style="width:100%;">
                                    <a class="mini-button" iconCls="icon-add" onclick="addRow()" plain="true">新增</a>
                                    <span class="separator"></span>
                                    <a class="mini-button" iconCls="icon-remove" onclick="removeRow()" plain="true">删除</a>
                                </td>
                            </tr>
                        </table>
                        <div class="">
                        </div>
                        <div id="grid1" class="mini-datagrid" allowCellEdit="true" idField="id" allowResize="false" allowCellSelect="true" multiSelect="false" editNextOnEnterKey="true" sortOrder="asc" showPager="false">
                            <div property="columns">
                                <div type="checkcolumn"></div>
                                <div field="texture" name="texture" width="80" headerAlign="center" sortField="money" allowSort="false" align="right">材质
                                    <input id="gold" property="editor" class="mini-combobox" style="width:100%;" valueField="id" textField="name" allowInput="true" data='[{id:"1",name:"TE50"},{id:"2",name:"TE70"}]' />
                                </div>
                                <div field="productNo" name="productNo" width="80" headerAlign="center" allowSort="false" align="center">品番
                                    <input id="gold" property="editor" class="mini-textbox" style="width:100%;" />
                                </div>
                                <div field="safeCount" name="safeCount" width="80" headerAlign="center" sortField="money" allowSort="false" align="right">安全在库数
                                    <input id="gold" property="editor" class="mini-textbox" style="width:100%;" />
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="productArea" style="width: 48%; float: left;height: 280px;margin-top: 25px; ">
                    <h4 class="header blue bolder smaller">钢柄工序</h4>
                    <div class="vspace-12-sm"></div>
                    <div class="space-4"></div>

                    <div id="datagrid1" class="mini-datagrid" showPager="false" idField="id" allowResize="false" allowCellEdit="true" allowCellSelect="true" multiSelect="true" editNextOnEnterKey="true" editNextRowCell="true">
                        <div property="columns">
                            <div type="checkcolumn"></div>
                            <input field="id" class="mini-hidden" visible="false" />
                            <div name="LoginName" field="loginname" headerAlign="center" align="center" width="80px">工序

                            </div>

                        </div>
                    </div>
                </div>
                <div class="productArea" style="width: 48%; float: right;height: 280px;margin-top: 25px;">
                    <h4 class="header blue bolder smaller">合金工序</h4>
                    <div class="vspace-12-sm"></div>
                    <div class="space-4"></div>
                    <div id="datagrid2" class="mini-datagrid" showPager="false" idField="id" allowResize="false" allowCellEdit="true" allowCellSelect="true" multiSelect="true" editNextOnEnterKey="true" editNextRowCell="true">
                        <div property="columns">
                            <div type="checkcolumn"></div>
                            <input field="id" class="mini-hidden" visible="false" />
                            <div name="LoginName" field="loginname" headerAlign="center" align="center" width="80px">工序

                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div style="text-align:center;padding:10px;">
        <a class="mini-button btn btn-success btn-round" onclick="saveDraft()" type="button">
            <i class="ace-icon fa fa-floppy-o bigger-110"></i> 保存
        </a> &nbsp; &nbsp;
    </div>
    </div>
    </div>
    <script text="text/javascript">
        mini.parse();
        var grid = mini.get("grid1");
        var gridData = new Array();

        grid.setData(gridData);

        function materialTypeChange(e) {
            if (e.value == "0001") {
                $(".productArea").hide();
                $(".materialArea").show();
                $(".textureArea").show();

                grid.hideColumn("safeCount");
                grid.hideColumn("productNo");
            } else if (e.value == "0002") {
                $(".productArea").show();
                $(".materialArea").hide();
                $(".textureArea").show();
                grid.showColumn("safeCount");
                grid.showColumn("productNo");
            } else {
                $(".productArea").hide();
                $(".materialArea").hide();
                $(".textureArea").hide();
            }

        }

        function addRow() {
            var newRow = {
                name: "New Row"
            };
            grid.addRow(newRow, grid.getData().length);
            grid.beginEditCell(newRow, "LoginName");
        }

        function removeRow() {
            var rows = grid.getSelecteds();
            if (rows.length > 0) {

                grid.removeRows(rows, true);
            } else {
                mini.alert("没有可删除的数据")
            }
        }

        function select() {

            var ck1 = mini.get("ck1");
            var ck2 = mini.get("ck2");
            var ck3 = mini.get("ck3");
            var ck4 = mini.get("ck4");
            var ck5 = mini.get("ck5");
            var ck6 = mini.get("ck6");
            var ck7 = mini.get("ck7");
            if (ck1.checked == true) {
                ck2.disable();
                ck5.disable();
            } else if (ck2.checked == true) {
                ck1.disable();
            } else {
                ck1.enable();
                ck2.enable();
                ck3.enable();
                ck4.enable();
                ck5.enable();
                ck6.enable();
                ck7.enable();
            }

        }

        var datagrid = mini.get("datagrid1");
        var datagridData = new Array();
        datagridData.push({
            loginname: "WC出库",
            id: "1"
        }, {
            loginname: "保护焊",
            id: "2"
        }, {
            loginname: "钢柄处理",
            id: "3"
        }, {
            loginname: "银焊",
            id: "4"
        }, {
            loginname: "徐冷处理",
            id: "5"
        }, {
            loginname: "委外加工",
            id: "6"
        }, {
            loginname: "表面处理1",
            id: "7"
        }, {
            loginname: "检查·出货",
            id: "8"
        });

        datagrid.setData(datagridData);
        var datagrid2 = mini.get("datagrid2");
        var datagridData2 = new Array();
        datagridData2.push({
            loginname: "WC出库",
            id: "1"
        }, {
            loginname: "银片",
            id: "2"
        }, {
            loginname: "洗合金",
            id: "3"
        }, {
            loginname: "委外加工",
            id: "4"
        });

        datagrid2.setData(datagridData2);
    </script>
</body>

</html>
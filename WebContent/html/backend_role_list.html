<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>角色功能列表</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="../boot.js" type="text/javascript"></script>
</head>

<body class="no-skin">

    <div class="main-container ace-save-state" id="main-container">
        <div class="main-content">
            <div class="main-content-inner">
                <!-- #section:basics/content.breadcrumbs -->
                <!-- /section:basics/content.breadcrumbs -->
            </div>
        </div>
        <!-- /.main-content -->

        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
        </a>
    </div>
    <!-- /.main-container -->

    <div class="mini-toolbar" style="/* border-bottom:0; */padding:0px;border-top:0;margin-top:5px;margin-bottom:5px;">
        <table style="width:100%;">
            <tr>
                <td style="width:100%;">
                    <a class="mini-button btn btn-warning btn-round" onclick="add()" type="button">
                        <i class="ace-icon fa fa-plus-circle bigger-110"></i>添加
                    </a>
                    <a class="mini-button btn btn-success btn-round" onclick="edit()">
                        <i class="ace-icon fa fa-pencil-square-o"></i>编辑
                    </a>
                    <a class="mini-button btn btn-danger btn-round" onclick="remove()">
                        <i class="ace-icon fa fa-times-circle"></i>删除
                    </a>
                </td>
            </tr>
        </table>
    </div>

    <div class="mini-fit">

        <div id="grid" class="mini-datagrid" style="width:100%;height:100%;" " url="grid3Data.txt " resultAsTree="false " allowResize="false " allowAlternating="true " >
            <div property="columns ">
                <div type="checkcolumn ">选择</div>
                <div type="indexcolumn " headerAlign="center ">序列</div>
                <div field="name " name="name " width="80 " headerAlign="center ">角色名称</div>
                <div field="istocompany " name="istocompany " width="40 " headerAlign="center " align="center " renderer="onRenderer ">是否公司角色</div>
                <div field="description " name="description " width="320 " headerAlign="center ">描述</div>
            </div>
        </div>
    </div>
    <script type="text/javascript ">
        var Genders = [{
            id: 1,
            text: '男'
        }, {
            id: 2,
            text: '女'
        }];
        mini.parse();

        var grid = mini.get("grid ");

        grid.load();


        var popWindow = {
            url: "backend_role_function.html ",
            title: "增加角色 ",
            width: 950,
            height: 660,
            ondestroy: function(action) {
                grid.reload();
            }
        };
        ///////////////////////////////////////////////////////   
        function add() {
            popWindow.url = "backend_role_function.html ";
            popWindow.title = "增加角色 ";
            mini.open(popWindow);
        }

        function edit() {
            var row = grid.getSelected();
            if (row) {
                popWindow.url = "backend_role_function.html ";
                popWindow.title = "编辑角色 ";
                mini.open(popWindow);
            } else {
                mini.alert("请选择一条记录！ ");
            }
        }

        function remove() {

            var row = grid.getSelected();
            if (row) {
                mini.confirm("确定要删除该信息吗? ", "确定? ", function(action) {
                    if (action == "ok ") {
                        grid.loading("操作中，请稍后...... ");

                        $.ajax({
                            url: "backend_role!delete.action?id=" + row.id,
                            success: function(text) {
                                if (text == " success ") {
                                    mini.alert("删除成功！ ");
                                    grid.reload();
                                } else {
                                    grid.reload();
                                    mini.alert(text);
                                    console.error(text);
                                }
                            }
                        });
                    }
                });
            } else {
                mini.alert("请选中一条记录 ");
            }
        }

        function onRenderer(e) {
            if (e.value == true) {
                return "√ ";
            } else {
                return " ";
            }
        }
    </script>

</body>

</html>
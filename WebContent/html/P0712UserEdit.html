<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>用户编辑</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="../boot.js" type="text/javascript"></script>
</head>

<body onload="loadfocus">
    <div class="edit-page-content">
        <div id="form1" class="form-horizontal" style="width: 100%; min-width: 800px;">
            <input id="id" class="mini-hidden" />
            <input id="mode" class="mini-hidden" />
            <div>
                <div class="tab-content profile-edit-tab-content">
                    <div id="edit-basic" class="tab-pane in active">

                        <div class="form-group">
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">用户编号:</label>
                            <div class="col-sm-3">
                                <input class="mini-textbox" width="200" id="stuffcode" vtype="maxLength:10" required="true" />
                            </div>
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">用户名:</label>
                            <div class="col-sm-3">
                                <input class="mini-textbox" width="200" id="name" vtype="maxLength:10" required="true" />
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">性別:</label>
                            <div class="col-sm-3">
                                <input class="mini-combobox" width="200" id="gender" valueField="id" textField="text" data="[{id:'0',text:'男'},{id:'1',text:'女'}]" emptyText="選択してください..." allowInput="false" required="true" />
                            </div>

                            <label id="parentidlable" class="col-sm-1 control-label no-padding-right" for="form-field-name">生年月日:</label>
                            <div class="col-sm-3">
                                <input class="mini-datepicker" width="200" id="birthday" format="yyyy/MM/dd" required="true" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">联系电话:</label>
                            <div class="col-sm-3">
                                <input class="mini-textbox" width="200" id="tel" vtype="maxLength:20" required="false" />
                            </div>
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">Mail:</label>
                            <div class="col-sm-3">
                                <input class="mini-textbox" width="200" id="mail" vtype="email;maxLength:100" required="false" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">所属部门:</label>
                            <div class="col-sm-3">
                                <input class="mini-combobox" width="200" id="depid" valueField="value" textField="text" ajaxType="post" emptyText="请选择..." allowInput="false" />
                            </div>
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-username">角色:</label>
                            <div class="col-sm-3">
                                <input class="mini-combobox" width="200" id="type" valueField="id" textField="id" data="[{id:'技术人员'},{id:'仓库管理'}]" emptyText="请选择..." allowInput="false" required="true" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label id="parentidlable" class="col-sm-1 control-label no-padding-right" for="form-field-name">入司时间:</label>
                            <div class="col-sm-3">
                                <input class="mini-datepicker" width="200" id="joiningdate" format="yyyy/MM/dd" required="true" />
                            </div>
                            <label class="col-sm-1 control-label no-padding-right" for="form-field-name">离司时间:</label>
                            <div class="col-sm-3">
                                <input class="mini-datepicker" width="200" id="leavingdate" format="yyyy/MM/dd" />
                            </div>
                        </div>

                        <div class="space-4"></div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; padding: 10px;">
                <a class="mini-button btn btn-info btn-round " onclick="onOk()" type="button">
                    <i class="ace-icon fa fa-floppy-o bigger-110"></i> 确 定
                </a> &nbsp; &nbsp;
                <a class="mini-button btn btn-warning btn-round" onclick="onCancel()" type="button">
                    <i class="ace-icon fa fa-undo bigger-110"></i> 取 消
                </a>
            </div>
        </div>
    </div>
    <!-- /.page-content -->

    <script type="text/javascript">
        var form = new mini.Form("#form1");
        mini.parse();

        var combobox = mini.get("department");
        var gridData = new Array();
        gridData.push({
                "name": "経営管理部",
                "depid": "100",
                "parentid": "",
                "sortorder": "1"
            }, {
                "name": "財務",
                "depid": "101",
                "parentid": "100",
                "sortorder": "2"
            }, {
                "name": "人事/総務",
                "depid": "102",
                "parentid": "100",
                "sortorder": "3"
            },

            {
                "name": "営業本部",
                "depid": "200",
                "parentid": "",
                "sortorder": "4"
            }, {
                "name": "営業一部",
                "depid": "201",
                "parentid": "200",
                "sortorder": "5"
            }, {
                "name": "営業二部",
                "depid": "202",
                "parentid": "200",
                "sortorder": "6"
            }, {
                "name": "輸入事業部",
                "depid": "203",
                "parentid": "200",
                "sortorder": "7"
            },

            {
                "name": "产品部",
                "depid": "300",
                "parentid": "",
                "sortorder": "8"
            },

            {
                "name": "物流部",
                "depid": "400",
                "parentid": "",
                "sortorder": "9"
            }
        );
        combobox.setData(gridData);

        function SetData(data) {
            mini.get("stuffcode").setValue(data.stuffcode);
            mini.get("name").setValue(data.name);
            mini.get("nameen").setValue(data.nameen);
            mini.get("type").setValue(data.type);
            mini.get("tel").setValue(data.tel);
            mini.get("mail").setValue(data.mail);
            mini.get("birthday").setValue(data.birthday);
            mini.get("joiningdate").setValue(data.joiningdate);
            mini.get("leavingdate").setValue(data.leavingdate);
            mini.get("gender").setValue(data.gender);
            mini.get("department").setValue(data.department);
            mini.get("mode").setValue(data.mode);

            if (data.mode == "1") {
                mini.get("stuffcode").disable();
            }
        }

        // 页面初期化制御
        /*function onload(flg) {
        	if (flg == 1) {
        		mini.get("username").enable();
        	} else {
        		mini.get("username").disable();
        	}
        }*/

        // 保存操作
        /*function onOk() {
        	form.validate();
        	if (form.isValid() == false) {
        		businessMessage.alert("E0009");
        		return;
        	}
        	businessMessage.alert("Q0002", null, oksave);
        }
        function oksave() {
        	var data = form.getData();
        	var accessurl  = "";
        	if(mini.get("mode").value == "2"){
        		accessurl = "/S9040Users/add";
        	} else{
        		accessurl = "/S9040Users/update";
        	}
        	doAjax(accessurl, data, function(obj) {
        		if (obj.status == "SUCCESS") {
        			businessMessage.alert("I0001", null, function() {
        				CloseWindow("ok");
        			});
        		} else if (obj.message == "E0024") {
        			businessMessage.alert(obj.text);
        			return;
        		}
        	});
        }*/
        function onOk() {
            form.validate();
            if (form.isValid() == false) {
                return;
            }

            // var data = {
            //     stuffcode: mini.get("stuffcode").getValue(),
            //     name: mini.get("name").getValue(),
            //     nameen: mini.get("nameen").getValue(),
            //     type: mini.get("type").getValue(),
            //     tel: mini.get("tel").getValue(),
            //     mail: mini.get("mail").getValue(),
            //     birthday: mini.get("birthday").getValue(),
            //     joiningdate: mini.get("joiningdate").getValue(),
            //     leavingdate: mini.get("leavingdate").getValue(),
            //     gender: mini.get("gender").getValue(),
            //     department: mini.get("department").getValue()
            // };

            // if (mini.get("mode").value == "1") {
            //     window.Owner.saveData(data);
            // } else {
            //     window.Owner.addData(data);
            // }

            window.CloseOwnerWindow();
        }

        // 初始化时focus
        function loadfocus() {
            mini.get("name").focus();
        }
    </script>
</body>

</html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>制造不良品入库</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="../boot.js" type="text/javascript"></script>
</head>

<body>
    <div class="edit-page-content">
        <div id="form1" th:object="${formdata}" class="form-horizontal" style="width: 100%; min-width: 800px;">
            <input id="id" class="mini-hidden" th:field="*{id}" />
            <input id="mode" class="mini-hidden" th:field="*{mode}" />
            <div>
                <div class="tab-content profile-edit-tab-content">
                    <div id="edit-basic" class="tab-pane in active">
                        <h4 class="header blue bolder smaller">基本信息</h4>
                        <div class="vspace-12-sm"></div>
                        <div class="space-4"></div>
                        <div class="form-group">
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">订单号:</label>
                            <div class="col-sm-3">
                                <input id="orderNumber" onvaluechanged="customSelected" class="mini-textbox" vtype="half:40" maxlength=40 required="true" th:field="*{customno}" />
                            </div>
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">计/受:</label>
                            <div class="col-sm-3">
                                <input id="prodectNumber" onvaluechanged="customSelected" class="mini-textbox" vtype="half:40" maxlength=40 required="true" th:field="*{customno}" />
                            </div>
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">订单日期:</label>
                            <div class="col-sm-3">
                                <input id="pdate" onvaluechanged="customSelected" class="mini-datepicker" vtype="half:40" required="true" th:field="*{customno}" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">发货日期:</label>
                            <div class="col-sm-3">
                                <input id="orderdate" class="mini-datepicker" required="true" />
                            </div>
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">材质:</label>
                            <div class="col-sm-3">
                                <input id="productDate" class="mini-textbox" required="true" />
                            </div>
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">数量:</label>
                            <div class="col-sm-3">
                                <input id="productNumber" class="mini-textbox" vtype="halfonly" maxlength=200 required="true" th:field="*{contactperson}" />
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">图号:</label>
                            <div class="col-sm-3">
                                <input id="productDate" class="mini-textbox" required="true" />
                            </div>

                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">客户:</label>
                            <div class="col-sm-3">
                                <input id="productDate" class="mini-textbox" required="true" style="width: 250px;" />
                            </div>
                            <label class="col-sm-0 control-label no-padding-right" for="form-field-username">品名:</label>
                            <div class="col-sm-3">
                                <input id="productDate" class="mini-textbox" required="true" style="width: 250px;" />
                            </div>
                        </div>

                        <h4 class="header blue bolder smaller">不良问题</h4>
                        <div class="vspace-12-sm"></div>
                        <div class="space-4"></div>
                        <table>
                            <tr class="">
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />合金来料问题</td>
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />钢柄来料问题</td>
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />银焊问题</td>
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />打磨问题</td>
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />研磨问题</td>
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />外协提供成品问题</td>
                                <td style="font-size: medium;padding-right: 20px;"><input type="checkbox" />其他</td>
                            </tr>
                        </table>
                        <h4 class="header blue bolder smaller">具体不良</h4>
                        <div class="vspace-12-sm"></div>
                        <div class="space-4"></div>
                        <table>
                            <tr class="">
                                <td style="font-size: medium;">
                                    <label class="col-sm-0 control-label no-padding-right" for="form-field-username">具体不良内容:</label>
                                    <div class="col-sm-4">
                                        <input id="orderdate" class="mini-textbox" maxlength=200 required="true" style="width: 300px;" />
                                    </div>
                                </td>
                                <td style="font-size: medium;">
                                    <label class="col-sm-0 control-label no-padding-right" for="form-field-username">解决方案:</label>
                                    <div class="col-sm-4">
                                        <input id="orderdate" class="mini-textbox" maxlength=200 required="true" style="width: 300px;" />
                                    </div>
                                </td>

                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div style="text-align: center; padding: 10px;">
                <a class="mini-button btn btn-info btn-round " onclick="onOk()" type="button">
                    <i class="ace-icon fa fa-floppy-o bigger-110"></i> 保存
                </a> &nbsp; &nbsp;

            </div>
        </div>
    </div>
    <!-- /.page-content -->
    <script type="text/javascript ">
        mini.parse();
        var form = new mini.Form("#form1 ");

        var grid = mini.get("grid1");

        function addRow() {
            var newRow = {
                name: "New Row"
            };
            grid.addRow(newRow, grid.getData().length);
            grid.beginEditCell(newRow, "LoginName");
        }

        function removeRow() {
            var rows = grid.getSelecteds();
            if (rows.length > 0) {

                grid.removeRows(rows, true);
            } else {
                mini.alert("没有可删除的数据")
            }
        }

        // 页面初期化制御
        function onload(flg) {
            if (flg == 1) {
                mini.get("username ").enable();
            } else {
                mini.get("username ").disable();
            }
        }

        // 保存操作
        function onOk() {
            form.validate();
            if (form.isValid() == false) {
                businessMessage.alert("E0009 ");
                return;
            }
            businessMessage.alert("Q0002 ", null, oksave);
        }

        function oksave() {
            var data = form.getData();
            data.deliveryaddress = grid.data;
            var accessurl = " ";
            if (mini.get("mode ").value == "2 ") {
                accessurl = "/S9910Customs/add ";
            } else {
                accessurl = "/S9910Customs/update ";
            }
            doAjax(accessurl, data, function(obj) {
                if (obj.status == "SUCCESS ") {
                    businessMessage.alert("I0001 ", null, function() {
                        CloseWindow("ok ");
                    });
                } else if (obj.message == "E0024 ") {
                    businessMessage.alert(obj.text);
                    return;
                }
            });
        }

        // 初始化时focus
        function loadfocus() {}
        grid.on("beforeload ", function(e) {
            if (grid.getChanges().length > 0) {
                if (confirm("有增删改的数据未保存，是否取消本次操作？ ")) {
                    e.cancel = true;
                }
            }
        });
    </script>
</body>

</html>